.model small
.DATA
DONE DB 'AVERAGE CACULATION DONE!', 0DH, 0AH, '$'
.code
public _AVERAGE
_AVERAGE PROC NEAR
SHOW MACRO S
  LEA DX, S
  MOV AH, 9
  INT 21H
  ENDM

  PUSH SI
  PUSH CX
  PUSH BX
  PUSH AX
  PUSH DX
  PUSH BP

  MOV BP,SP
  MOV SI,SS:[BP+14]
  MOV CX,5
AVE :
  MOV BL,BYTE PTR [SI+10]
  MOV BH,0
  SHL BX,1
  MOV AL,BYTE PTR [SI+11]
  MOV AH,0
  ADD BX,AX
  MOV AL,BYTE PTR [SI+12]
  MOV AH,0
  SHR AX,1
  ADD AX,BX
  SHL AX,1
  MOV DL,7
  DIV DL
  MOV 13[SI],AL
  ADD SI,16
  LOOP AVE
  SHOW DONE
  POP BP
  POP DX
  POP AX
  POP BX
  POP CX
  POP SI
  RET
_AVERAGE ENDP
END
